# Stage 3 â€” Sessions UI (Tree View)

## ğŸ“ Sessions Tab Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ Sessions]   [ğŸ¯ Focus]   [ğŸ“Š Dashboard]               [âš™ï¸ Settings]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ“‚ FOLDER TREE     â”‚  â”‚              SESSION PANEL                    â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  â–¼ ğŸ“ Mathematics   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚    â–¼ ğŸ“ Calculus    â”‚  â”‚  â”‚  ğŸ“¹ Intro to Derivatives                â”‚  â”‚ â”‚
â”‚  â”‚      â— Lecture 01 âœ“ â”‚  â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚  â”‚      â—‹ Lecture 02   â”‚  â”‚  â”‚  Status: ğŸŸ¡ Started (2/3 parts)         â”‚  â”‚ â”‚
â”‚  â”‚      â—‹ Lecture 03   â”‚  â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 67%               â”‚  â”‚ â”‚
â”‚  â”‚    â–¶ ğŸ“ Algebra     â”‚  â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚  â”‚  â–¶ ğŸ“ Physics       â”‚  â”‚  â”‚  Tags: [calculus] [exam-prep]           â”‚  â”‚ â”‚
â”‚  â”‚  â–¶ ğŸ“ Chemistry     â”‚  â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚  â”‚                     â”‚  â”‚  â”‚  ğŸ“ Description:                        â”‚  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  First lecture covering derivatives...  â”‚  â”‚ â”‚
â”‚  â”‚  [ğŸ“‚ Change Folder] â”‚  â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚  â”‚  [ğŸ”„ Refresh]       â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  ğŸ“¼ PLAYLIST                            â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  â”‚ âœ“ part1.mp4    30:45  â–¶ï¸        â”‚    â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  â”‚ â—‹ part2.mp4    28:12            â”‚    â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  â”‚ â—‹ part3.mp4    25:30            â”‚    â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  ğŸ“„ ATTACHMENTS                         â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  [ğŸ“„ summary.pdf]  [ğŸ“„ notes.pdf]       â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚                                         â”‚  â”‚ â”‚
â”‚                           â”‚  â”‚  [â–¶ï¸ START SESSION]  [ğŸ“ Edit]          â”‚  â”‚ â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ² FolderTree Component

### Component Structure
```tsx
// components/FolderTree/FolderTree.tsx
interface FolderTreeProps {
  rootNode: FolderNode;
  selectedId: string | null;
  onSelectSession: (sessionId: string) => void;
}

function FolderTree({ rootNode, selectedId, onSelectSession }: FolderTreeProps) {
  return (
    <div className="folder-tree">
      <TreeNode 
        node={rootNode} 
        depth={0}
        selectedId={selectedId}
        onSelect={onSelectSession}
      />
    </div>
  );
}
```

### TreeNode Component
```tsx
// components/FolderTree/TreeNode.tsx
interface TreeNodeProps {
  node: FolderNode;
  depth: number;
  selectedId: string | null;
  onSelect: (id: string) => void;
}

function TreeNode({ node, depth, selectedId, onSelect }: TreeNodeProps) {
  const [expanded, setExpanded] = useState(depth < 2); // Auto-expand 2 levels
  
  if (node.type === 'category') {
    return (
      <div className="tree-node category">
        <div 
          className="node-header"
          style={{ paddingLeft: depth * 16 }}
          onClick={() => setExpanded(!expanded)}
        >
          <span className="expand-icon">{expanded ? 'â–¼' : 'â–¶'}</span>
          <span className="folder-icon">ğŸ“</span>
          <span className="node-name">{node.name}</span>
        </div>
        {expanded && (
          <div className="node-children">
            {node.children?.map(child => (
              <TreeNode key={child.path} node={child} depth={depth + 1} ... />
            ))}
          </div>
        )}
      </div>
    );
  }
  
  // Session node
  const session = node.session!;
  const isSelected = session.id === selectedId;
  
  return (
    <div 
      className={`tree-node session ${isSelected ? 'selected' : ''}`}
      style={{ paddingLeft: depth * 16 }}
      onClick={() => onSelect(session.id)}
    >
      <StatusIcon status={session.status} />
      <span className="node-name">{node.name}</span>
      {session.progress > 0 && session.progress < 100 && (
        <ProgressBadge value={session.progress} />
      )}
    </div>
  );
}
```

### Status Icons
| Status | Icon | Color |
|--------|------|-------|
| `untouched` | â—‹ | Gray |
| `started` | â— | Yellow |
| `completed` | â— | Green âœ“ |

---

## ğŸ´ SessionCard Component

```tsx
// components/SessionCard/SessionCard.tsx
interface SessionCardProps {
  session: Session;
  onStartSession: () => void;
  onEditSession: () => void;
}

function SessionCard({ session, onStartSession, onEditSession }: SessionCardProps) {
  return (
    <div className="session-card">
      {/* Header */}
      <div className="session-header">
        <h2>{session.name}</h2>
        <StatusBadge status={session.status} />
      </div>
      
      {/* Progress Bar */}
      <ProgressBar 
        value={session.progress} 
        label={`${session.videos.filter(v => v.completed).length}/${session.videos.length} parts`}
      />
      
      {/* Tags */}
      <TagList tags={session.tags} />
      
      {/* Description */}
      <p className="description">{session.description || 'No description'}</p>
      
      {/* Playlist */}
      <Playlist 
        videos={session.videos}
        onPlayVideo={(videoPath) => handlePlayVideo(videoPath)}
      />
      
      {/* PDFs */}
      <Attachments pdfs={session.pdfs} />
      
      {/* Actions */}
      <div className="actions">
        <button className="primary" onClick={onStartSession}>
          â–¶ï¸ Start Session
        </button>
        <button className="secondary" onClick={onEditSession}>
          ğŸ“ Edit
        </button>
      </div>
    </div>
  );
}
```

### Playlist Sub-component
```tsx
function Playlist({ videos, onPlayVideo }: PlaylistProps) {
  return (
    <div className="playlist">
      <h3>ğŸ“¼ Playlist</h3>
      {videos.map((video, index) => (
        <div 
          key={video.filename}
          className={`playlist-item ${video.completed ? 'completed' : ''}`}
        >
          <span className="status">
            {video.completed ? 'âœ“' : index + 1}
          </span>
          <span className="filename">{video.filename}</span>
          <span className="duration">{formatDuration(video.duration)}</span>
          <button onClick={() => onPlayVideo(video.path)}>â–¶ï¸</button>
        </div>
      ))}
    </div>
  );
}
```

---

## ğŸ® Session Selection Behavior

### Selection Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks      â”‚â”€â”€â”€â”€â–¶â”‚ sessionStore     â”‚â”€â”€â”€â”€â–¶â”‚ SessionCard      â”‚
â”‚ tree node        â”‚     â”‚ .selectSession() â”‚     â”‚ renders          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ Load full        â”‚
                         â”‚ session.meta.jsonâ”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Keyboard Navigation
| Key | Action |
|-----|--------|
| `â†‘` / `â†“` | Navigate between nodes |
| `Enter` | Select session / Toggle folder |
| `â†` | Collapse folder |
| `â†’` | Expand folder |
| `Home` | Go to first node |
| `End` | Go to last node |

### State Updates on Selection
```typescript
// stores/sessionStore.ts
selectSession: async (sessionId: string) => {
  const session = findSessionById(get().folderTree, sessionId);
  if (!session) return;
  
  // Load full metadata from disk
  const metadata = await window.api.loadSessionMetadata(session.path);
  
  // Update last accessed
  metadata.lastAccessedAt = new Date().toISOString();
  await window.api.saveSessionMetadata(session.path, metadata);
  
  set({ selectedSession: { ...session, ...metadata } });
}
```

---

## ğŸ§© Component Hierarchy

```
SessionsPage
â”œâ”€â”€ Sidebar
â”‚   â”œâ”€â”€ FolderTree
â”‚   â”‚   â””â”€â”€ TreeNode (recursive)
â”‚   â”‚       â”œâ”€â”€ CategoryNode
â”‚   â”‚       â””â”€â”€ SessionNode
â”‚   â”‚           â””â”€â”€ ProgressBadge
â”‚   â””â”€â”€ SidebarActions
â”‚       â”œâ”€â”€ ChangeFolderButton
â”‚       â””â”€â”€ RefreshButton
â”‚
â””â”€â”€ MainPanel
    â”œâ”€â”€ EmptyState (no session selected)
    â””â”€â”€ SessionCard
        â”œâ”€â”€ SessionHeader
        â”œâ”€â”€ ProgressBar
        â”œâ”€â”€ TagList
        â”œâ”€â”€ Description
        â”œâ”€â”€ Playlist
        â”‚   â””â”€â”€ PlaylistItem
        â”œâ”€â”€ Attachments
        â””â”€â”€ ActionButtons
```

---

## ğŸ“± Responsive Behavior

| Viewport | Sidebar | Main Panel |
|----------|---------|------------|
| Large (â‰¥1200px) | 280px fixed | Flexible |
| Medium (768-1199px) | 240px fixed | Flexible |
| Small (<768px) | Collapsible overlay | Full width |

---

> [!IMPORTANT]
> **Approve Stage 3?** â€” Review the Sessions UI layout, tree navigation, and session selection behavior before I proceed to Stage 4 (Session Metadata System).
